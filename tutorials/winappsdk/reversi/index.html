<!doctype html>
<html lang="en" class="h-100">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=yes">
        <meta name="description" content="tutorialr.com - Tutorials, Talks and Workshops"/>
        <!-- Twitter -->
        <meta name="twitter:card" content="summary_large_image"/>
        <meta name="twitter:site" content="@tutorialrdotcom"/>
        <meta name="twitter:creator" content="@rogueplanetoid"/>
        <meta name="twitter:title" content="tutorialr.com"/>
        <meta name="twitter:description" content="Tutorials, Talks and Workshops"/>
        <meta name="twitter:image" content="https://www.tutorialr.com/images/card.png"/>
        <meta name="twitter:image:alt" content="Tutorials, Talks and Workshops"/>
        <!-- /Twitter -->
        <!-- Open Graph -->
        <meta property="og:type" content="website"/>
        <meta property="og:title" content="tutorialr.com"/>
        <meta property="og:site_name" content="tutorialr.com">
        <meta property="og:description" content="Tutorials, Talks and Workshops"/>
        <meta property="og:image" content="https://www.tutorialr.com/images/card.png"/>
        <meta property="og:image:width" content="1280"/>
        <meta property="og:image:height" content="630"/>
        <!-- /Open Graph -->
        <link rel="icon" href="../../../favicon.ico"/>
        <link href="../css/win-app-sdk.css" rel="stylesheet">
        <link href="../../../css/style.css" rel="stylesheet">
        <link href="../../../bootstrap/css/bootstrap.min.css" rel="stylesheet">
        <link href="../../../highlight/css/vs.min.css" rel="stylesheet">
        <title>tutorialr.com - Tutorials - Windows App SDK - Reversi</title>
    </head>
    <body class="d-flex flex-column h-100">
        <!-- Main -->
        <main>
            <!-- Navigation -->	
            <nav class="navbar top navbar-light navbar-expand-md bg-brand">
                <div class="container-fluid">
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#tutorialr-navbar" aria-controls="tutorialr-navbar" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <a class="navbar-brand" href="../../">
                        <img src="../../../images/header.png" alt="tutorialr.com" height="50px">
                    </a>
                    <div id="tutorialr-navbar" class="collapse navbar-collapse">
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link text-tutorialr" href="../../../">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link text-tutorialr" href="../../../tutorials">Tutorials</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link btn btn-tutorialr active" href="../../winappsdk">Windows App SDK</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link text-tutorialr" href="../../../talks">Talks</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link text-tutorialr" href="../../../workshops">Workshops</a>
                            </li>
                        </ul>
                    </div>
                    <a href="https://www.comentsys.com" target="_blank">
                        <img src="../../../images/comentsys.png" alt="Comentsys" height="50px">
                    </a>
                </div>
            </nav>
            <!-- /Navigation -->
            <div class="waves waves-top"></div>
            <div class="bg-tutorialr">         
                <!-- Section -->            
                <section class="text-center text-white container">
                    <!-- Hero -->
                    <h1 class="display-4 mx-auto">Reversi</h1>
                    <p class="lead">
                        <strong>Learn</strong> creating a <strong>Reversi</strong> game using <strong>Windows App SDK</strong> with this <strong>Tutorial</strong> 
                    </p>
                    <!-- /Hero -->
                    <!-- Tutorial -->
                    <div class="col-lg-10 mx-auto">
                        <div class="container text-start text-black">
                            <div class="card position-relative">
                                <img src="../images/win-app-sdk-reversi.png" class="img-fluid p-2" alt="Reversi"/>
                                <div class="card-header">
                                    <div class="justify-content-sm-center text-center m-1">
                                        <a href="../../pdf/win-app-sdk-reversi.pdf" target="_blank">
                                            <span class="btn btn-tutorialr btn-block btn-sm px-3 py-2 position-relative">
                                                Reversi
                                                <span class="position-absolute top-0 start-100 translate-middle badge bg-tutorialr-light rounded-pill">PDF</span>
                                            </span>
                                        </a>
                                    </div>
                                </div>   
                                <div class="card-body">
                                    <p>
                                        <strong>Reversi</strong> shows how you can create the game of <strong>Reversi</strong> or <strong>Othello</strong> based on the work by <a href="https://github.com/OttoBotCode" target="_blank">OttoBotCode</a>, 
                                        using emoji and with a toolkit from <strong>NuGet</strong> using the <strong>Windows App SDK</strong>.
                                    </p>
                                    <h2 class="display-6">Step 1</h2>
                                    <p>
                                        Follow <a href="../setup-and-start">Setup and Start</a> on how to get <strong>Setup</strong> and <strong>Install</strong> what you need for <strong>Visual Studio 2022</strong> and <strong>Windows App SDK</strong>.
                                    </p>
                                    <div class="container">
                                        <div class="row mb-3">
                                            <div class="col-sm">
                                                In <strong>Windows 11</strong> choose <strong>Start</strong> and then find or search for <strong>Visual Studio 2022</strong> and then select it.
                                            </div>
                                            <div class="col-sm">
                                                <img src="../assets/win-vs.png" class="img-fluid" alt="Visual Studio 2022"/>
                                            </div>
                                        </div>

                                        <div class="row mb-3">
                                            <div class="col-sm">
                                                Once <strong>Visual Studio 2022</strong> has started select <strong>Create a new project</strong>.
                                            </div>
                                            <div class="col-sm">
                                                <img src="../assets/win-vs-new-project.png" class="img-fluid" alt="Create a new project"/>
                                            </div>
                                        </div>

                                        <div class="row mb-3">
                                            <div class="col-sm">
                                                Then choose the <strong>Blank App, Packages (WinUI in Desktop)</strong> and then select <strong>Next</strong>.
                                            </div>
                                            <div class="col-sm">
                                                <img src="../assets/win-vs-win-ui.png" class="img-fluid" alt="Blank App, Packages (WinUI in Desktop)"/>
                                            </div>
                                        </div>

                                        <div class="row mb-3">
                                            <div class="col-sm">
                                                After that in <strong>Configure your new project</strong> type in the Project name as <i>Reversi</i>, then select a <strong>Location</strong> and then select <strong>Create</strong> to start a new <strong>Solution</strong>.
                                            </div>
                                            <div class="col-sm">
                                                <img src="../assets/win-vs-configure-project.png" class="img-fluid" alt="Configure project" />
                                            </div>
                                        </div>
                                    </div>
                                    <h2 class="display-6">Step 2</h2>
                                    <p>
                                        Then in <strong>Visual Studio within</strong> <strong>Solution Explorer</strong> for the <strong>Solution</strong>, right click on the <strong>Project</strong> shown below the <strong>Solution</strong> and then select <strong>Manage NuGet Packages...</strong>
                                    </p>
                                    <p>
                                        <img src="../assets/was-manage-nuget-packages.png" class="img-fluid" alt="Manage NuGet Packages" />
                                    </p>
                                    <h2 class="display-6">Step 3</h2>
                                    <p>
                                        Then in the <strong>NuGet Package Manager</strong> from the <strong>Browse</strong> tab search for <strong>Comentsys.Toolkit.WindowsAppSdk</strong> and then select <strong>Comentsys.Toolkit.WindowsAppSdk by Comentsys</strong> as indicated and select <strong>Install</strong>
                                    </p>
                                    <p>
                                        <img src="../assets/was-nuget-toolkit.png" class="img-fluid" alt="NuGet Package Manager Comentsys.Toolkit.WindowsAppSdk" />
                                    </p>
                                    <p>
                                        This will add the package for <strong>Comentsys.Toolkit.WindowsAppSdk</strong> to your <strong>Project</strong>. If you get the <strong>Preview Changes</strong> screen saying 
                                        <strong>Visual Studio is about to make changes to this solution. Click OK to proceed with the changes listed below.</strong> You can read the message and then select 
                                        <strong>OK</strong> to <strong>Install</strong> the package.
                                    </p>
                                    <h2 class="display-6">Step 4</h2>
                                    <p>
                                        Then while still in the <strong>NuGet Package Manager</strong> from the <strong>Browse</strong> tab search for <strong>Comentsys.Assets.FluentEmoji</strong> and then select <strong>Comentsys.Assets.FluentEmoji by Comentsys</strong> as indicated and select <strong>Install</strong>
                                    </p>
                                    <p>
                                        <img src="../assets/was-nuget-emoji.png" class="img-fluid" alt="NuGet Package Manager Comentsys.Assets.FluentEmoji" />
                                    </p>
                                    <p>
                                        This will add the package for <strong>Comentsys.Assets.FluentEmoji </strong>to your <strong>Project</strong>. If you get the <strong>Preview Changes</strong> screen saying 
                                        <strong>Visual Studio is about to make changes to this solution. Click OK to proceed with the changes listed below.</strong> You can read the message and then select 
                                        <strong>OK</strong> to <strong>Install</strong> the package, then you can close the <strong>tab</strong> for <strong>Nuget: Reversi</strong> by selecting the <strong>x</strong> next to it. 
                                    </p>
                                    <h2 class="display-6">Step 5</h2>
                                    <p>
                                        Then in <strong>Visual Studio</strong> within <strong>Solution Explorer</strong> for the <strong>Solution</strong>, right click on the <strong>Project</strong> shown below the <strong>Solution</strong> and then select <strong>Add</strong> then <strong>New Item…</strong>
                                    </p>
                                    <p>
                                        <img src="../assets/was-new-item.png" class="img-fluid" alt="Add New Item" />
                                    </p>
                                    <h2 class="display-6">Step 6</h2>
                                    <p>
                                        Then in <strong>Add New Item</strong> from the <strong>C# Items</strong> list, select <strong>Code</strong> and then select <strong>Code File</strong> from the list next to this, then type in the name of <i>Library.cs</i> and then <strong>Click</strong> on <strong>Add</strong>.
                                    </p>
                                    <p>
                                        <img src="../assets/was-add-new-item-reversi.png" class="img-fluid" alt="Add New Code File" />
                                    </p>
                                    <h2 class="display-6">Step 7</h2>
                                    <p>
                                        You will now be in the <strong>View</strong> for the <strong>Code</strong> of <i>Library.cs</i>, within this type the following <strong>Code</strong>:
                                    </p>
                                    <pre class="code-block language-csharp"><code>
using Comentsys.Assets.FluentEmoji;
using Comentsys.Toolkit.Binding;
using Comentsys.Toolkit.WindowsAppSdk;
using Microsoft.UI;
using Microsoft.UI.Text;
using Microsoft.UI.Xaml;
using Microsoft.UI.Xaml.Controls;
using Microsoft.UI.Xaml.Input;
using Microsoft.UI.Xaml.Media;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Threading.Tasks;

namespace Reversi;

public enum Player
{
    None, Black, White
}

// Extensions, Position and Move Class


public class State
{
    // State Variables, Is Inside & Outflanked

    // Is Valid, Get Valid, Set Flip, Set Count & Swap

    // Get Winner, Set Turn & Constructor

    // Move & Occupied

}

public class Library
{
    // Constants, Variables, Get Source, Set Source, Set Valid & Get Valid

    // Player Source, Get Player, Get Score, Set Text, Set Flip & Set

    // Add & Play

    // Layout & New

}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
                                    </code></pre>  
                                    <p>
                                        So far in <i>Library.cs</i> has <code>using</code> for <code>Comentsys.Toolkit.WindowsAppSdk</code> and others along with a <code>namespace</code> which allows many classes to be 
                                        defined together, usually a <code>class</code> is defined per file but to make things easier each will be defined in <i>Library.cs</i> instead.
                                    </p>
                                    <h2 class="display-6">Step 8</h2>
                                    <p>
                                        Still in <i>Library.cs</i> for the <code>namespace</code> of <code>Reversi</code> in <i>Library.cs</i> you can define a <code>class</code> for <code>Extensions</code>, <code>Position</code> and <code>Move</code> 
                                        after the <strong>Comment</strong> of <code>// Extensions, Position & Move Class</code> by typing the following:
                                    </p>
                                    <pre class="code-block language-csharp"><code>
public static class Extensions
{
    public static Player Other(this Player player) =>
    player switch
    {
        Player.Black => Player.White,
        Player.White => Player.Black,
        _ => Player.None
    };
}

public class Position
{
    public int Row { get; set; }

    public int Column { get; set; }

    public Position(int row, int column) =>
        (Row, Column) = (row, column);

    public override bool Equals(object obj) =>
        obj is Position pos && Row == pos.Row && Column == pos.Column;

    public override int GetHashCode() =>
        Row.GetHashCode() + Column.GetHashCode();
}

public class Move
{
    public Player Player { get; set; }
    public Position Position { get; set; }
    public IEnumerable&lt;Position&gt; Outflanked { get; set; }
    public IEnumerable&lt;Position&gt; PreviousValid { get; set; }

    public Move(Player player, Position position,
        IEnumerable&lt;Position&gt; outflanked, IEnumerable&lt;Position&gt; previousValid) =>
        (Player, Position, Outflanked, PreviousValid) =
        (player, position, outflanked, previousValid);
}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
                                    </code></pre>  
                                    <p>
                                        <code>Extensions</code> is used to define an extension <strong>Method</strong> for <code>Player</code>, then <code>Position</code> is used to define 
                                        the location of a piece in the game and <code>Move</code> is used to define which moves are possible and uses <code>Position</code>.
                                    </p>
                                    <h2 class="display-6">Step 9</h2>
                                    <p>
                                        Still in the <code>namespace</code> of <code>Reversi</code> in <i>Library.cs</i> and in the <code>class</code> of <code>State</code>, after the <strong>Comment</strong> of <code>// Variables, Is Inside & Outflanked</code> type 
                                        the following <strong>Variables</strong> which represent values in the game along with the gameboard along with <strong>Methods</strong> for <code>IsInside</code> which determines if 
                                        a location is inside another and <code>Outflanked</code> which are used do get the positions to outflank the other player in the game.
                                    </p>
                                    <pre class="code-block language-csharp"><code>
private const int rows = 8;
private const int columns = 8;

public Player[,] Board { get; }
public Dictionary&lt;Player, int&gt; Count { get; }
public Player Current { get; private set; }
public bool Over { get; private set; }
public Player Winner { get; private set; }
public Dictionary&lt;Position, IEnumerable&lt;Position&gt;&gt; Valid { get; private set; }

private bool IsInside(int row, int column) =>
    row >= 0 && row &lt; rows && column >= 0 && column &lt; columns;

private IEnumerable&lt;Position&gt; Outflanked(
    Position position, Player player, int rowOffset, int columnOffset)
{
    List&lt;Position&gt; outflanked = new();
    int row = position.Row + rowOffset;
    int column = position.Column + columnOffset;
    while (IsInside(row, column) && Board[row, column] != Player.None)
    {
        if (Board[row, column] == player.Other())
        {
            outflanked.Add(new Position(row, column));
            row += rowOffset;
            column += columnOffset;
        }
        else if (Board[row, column] == player)
            return outflanked;
    }
    return Enumerable.Empty&lt;Position&gt;();
}

private IEnumerable&lt;Position&gt; Outflanked(Position position, Player player)
{
    List&lt;Position&gt; outflanked = new();
    for (int rowOffset = -1; rowOffset &lt;= 1; rowOffset++)
    {
        for (int columnOffset = -1; columnOffset &lt;= 1; columnOffset++)
        {
            if (rowOffset == 0 && columnOffset == 0)
                continue;
            outflanked.AddRange(
                Outflanked(position, player, rowOffset, columnOffset));
        }
    }
    return outflanked;
}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
                                    </code></pre>
                                    <h2 class="display-6">Step 10</h2>
                                    <p>
                                        While still in the <code>namespace</code> of <code>Reversi</code> in <i>Library.cs</i> and the <code>class</code> of <code>State</code> and after the <strong>Comment</strong> 
                                        of <code>// Is Valid, Get Valid, Set Flip, Set Count & Swap</code> type the following <strong>Methods</strong>:
                                    </p>
                                    <pre class="code-block language-csharp"><code>
private bool IsValid(
    Player player, Position position, out IEnumerable<Position> outflanked)
{
    outflanked = Board[position.Row, position.Column] == Player.None ?
        Outflanked(position, player) : Enumerable.Empty<Position>();
    return outflanked.Any();
}

private Dictionary&lt;Position, IEnumerable&lt;Position&gt;&gt; GetValid(Player player)
{
    Dictionary&lt;Position, IEnumerable&lt;Position&gt;&gt; valid = new();
    for (int row = 0; row &lt; rows; row++)
    {
        for (int column = 0; column &lt; columns; column++)
        {
            var position = new Position(row, column);
            if (IsValid(player, position, out IEnumerable<Position> outflanked))
            {
                valid[position] = outflanked;
            }
        }
    }
    return valid;
}

private void SetFlip(IEnumerable&lt;Position&gt; positions)
{
    foreach (var position in positions)
    {
        Board[position.Row, position.Column] =
            Board[position.Row, position.Column].Other();
    }
}

private void SetCount(Player player, int count)
{
    Count[player] += count + 1;
    Count[player.Other()] -= count;
}

private void Swap()
{
    Current = Current.Other();
    Valid = GetValid(Current);
}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                                    </code></pre>  
                                    <p>
                                        <code>IsValid</code> is used to determine if a location can be placed onto and is used with <code>GetValid</code> to determine this for a given player. 
                                        <code>SetFlip</code> is used to flip a player and this takes advantage of the <strong>Method</strong> defined in <code>Extensions</code> which is also used in <code>SetCount</code> 
                                        to update counter for a player and <code>Swap</code> to switch players.                                      
                                    </p>
                                    <h2 class="display-6">Step 11</h2>
                                    <p>
                                        While still in the <code>namespace</code> of <code>Reversi</code> in <i>Library.cs</i> and the <code>class</code> of <code>State</code> and after 
                                        the <strong>Comment</strong> of <code>// Get Winner, Set Turn & Constructor</code> type the following <strong>Methods</strong>:
                                    </p>
                                    <pre class="code-block language-csharp"><code>
private Player GetWinner()
{
    if (Count[Player.Black] > Count[Player.White])
        return Player.Black;
    if (Count[Player.Black] &lt; Count[Player.White])
        return Player.White;
    return Player.None;
}

private void SetTurn()
{
    Swap();
    if (Valid.Any())
        return;
    Swap();
    if (Valid.Count == 0)
    {
        Current = Player.None;
        Over = true;
        Winner = GetWinner();
    }
}

public State()
{
    Board = new Player[rows, columns];
    Board[3, 3] = Player.White;
    Board[3, 4] = Player.Black;
    Board[4, 3] = Player.Black;
    Board[4, 4] = Player.White;
    Count = new Dictionary&lt;Player, int&gt;()
    {
        { Player.Black, 2 },
        { Player.White, 2 }
    };
    Current = Player.Black;
    Valid = GetValid(Current);
}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                                    </code></pre>  
                                    <p>
                                        <code>GetWinner</code> will be used to check which of the players is the winner or if there is no winner. <code>SetTurn</code> will swap the players 
                                        around so each can take their turn and the <strong>Constructor</strong> for <code>State</code> will setup the initial configuration and positions of the 
                                        players to start the game.
                                    </p>
                                    <h2 class="display-6">Step 12</h2>
                                    <p>
                                        While still in the <code>namespace</code> of <code>Reversi</code> in <i>Library.cs</i> and the <code>class</code> of <code>State</code> and after 
                                        the <strong>Comment</strong> of <code>// Move & Occupied</code> type the following <strong>Methods</strong>:
                                    </p>
                                    <pre class="code-block language-csharp"><code>
public bool Move(Position position, out Move move)
{
    if (!Valid.ContainsKey(position))
    {
        move = null;
        return false;
    }
    var player = Current;
    var previous = Valid.Keys;
    var outflanked = Valid[position];
    Board[position.Row, position.Column] = player;
    SetFlip(outflanked);
    SetCount(player, outflanked.Count());
    SetTurn();
    move = new Move(player, position, outflanked, previous);
    return true;
}

public IEnumerable&lt;Position&gt; Occupied()
{
    for (int row = 0; row &lt; rows; row++)
    {
        for (int column = 0; column &lt; columns; column++)
        {
            if (Board[row, column] != Player.None)
                yield return new Position(row, column);
        }
    }
}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
                                    </code></pre>  
                                    <p>
                                        <code>Move</code> will be used to place a player on the board and flip the pieces the opposing player has placed appropriately to 
                                        complete a move in the game and <code>Occupied</code> is used to determine which places on the board are not currently occupied by any player.
                                    </p>
                                    <h2 class="display-6">Step 13</h2>
                                    <p>
                                        While still in the <code>namespace</code> of <code>Reversi</code> in <i>Library.cs</i> and the <code>class</code> of <code>Library</code> after 
                                        the <strong>Comment</strong> of <code>// Constants, Variables, Get Source, Set Source, Set Valid & Get Valid</code> type the following 
                                        <strong>Constants</strong>, <strong>Variables</strong> and <strong>Methods</strong>:
                                    </p>
                                    <pre class="code-block language-csharp"><code>
private const string title = "Reversi";
private const int square_size = 100;
private const int disc_size = 72;
private const int font = 24;
private const int size = 8;

private ImageSource[] _sources;
private State _state;

private TextBlock _text;
private Dialog _dialog;
private Grid _grid;

private async Task&lt;ImageSource&gt; GetSourceAsync(FluentEmojiType type) =>
    await FlatFluentEmoji.Get(type).AsImageSourceAsync();

private async Task SetSourceAsync() =>
_sources ??= (new ImageSource[]
{
    await GetSourceAsync(FluentEmojiType.GreenCircle),
    await GetSourceAsync(FluentEmojiType.BlackCircle),
    await GetSourceAsync(FluentEmojiType.WhiteCircle)
});

private void SetSource(Position position, ImageSource source) =>
    _grid.Children.Cast&lt;Grid&gt;()
    .First(f => Grid.GetRow(f) == position.Row
    && Grid.GetColumn(f) == position.Column)
    .Children.Cast&lt;Image&gt;().First().Source = source;

private void SetValid(IEnumerable&lt;Position&gt; positions, ImageSource source)
{
    foreach (var position in positions)
    {
        var square = _state.Board[position.Row, position.Column];
        if (square == Player.None)
            SetSource(position, source);
    }
}

private ImageSource GetValid(int row, int column) =>
    _state.Valid.ContainsKey(new Position(row, column)) ? _sources[0] : null;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                                    </code></pre>  
                                    <p>
                                        <strong>Constants</strong> are values that are used in the game that will not change and <strong>Variables</strong> are used to store various values and controls needed for the game. 
                                        <code>GetSourceAsync</code>, <code>SetSourceAsync</code> and <code>SetSource</code> are used to set the <strong>Emoji</strong> used to represent the players in the game. 
                                        <code>SetValid</code> is used to set a valid position and <code>GetValue</code> is used to get a valid position.
                                    </p>
                                    <h2 class="display-6">Step 14</h2>
                                    <p>
                                        While still in the <code>namespace</code> of <code>Reversi</code> in <i>Library.cs</i> and the <code>class</code> of <code>Library</code> after 
                                        the <strong>Comment</strong> of <code>// Player Source, Get Player, Get Score, Set Text, Set Flip & Set</code> type the following <strong>Methods</strong>:
                                    </p>
                                    <pre class="code-block language-csharp"><code>
private ImageSource PlayerSource(int row, int column)
{
    var player = _state.Board[row, column];
    return player != Player.None ? _sources[(int)player] : GetValid(row, column);
}

private string GetPlayer(Player player) =>
    Enum.GetName(typeof(Player), player);

private string GetScore() =>
    $"Score: {GetPlayer(Player.Black)}: {_state.Count[Player.Black]} {GetPlayer(Player.White)}: {_state.Count[Player.White]}";

private void SetText() =>
    _text.Text = $"Current: {GetPlayer(_state.Current)} - {GetScore()}";

private void SetFlip(Move move)
{
    foreach (var position in move.Outflanked)
        SetSource(position, _sources[(int)move.Player]);
}

private void Set(Position position, Move move)
{
    SetValid(move.PreviousValid, null);
    var player = _state.Board[position.Row, position.Column];
    if (player != Player.None)
        SetSource(position, _sources[(int)player]);
    SetFlip(move);
    SetValid(_state.Valid.Keys, _sources[0]);
    SetText();
}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                    </code></pre>  
                                    <p>
                                        <code>PlayerSource</code> will get the image needed to represent a player where valid, <code>GetPlayer</code> will get the name of the player. 
                                        <code>GetScore</code> will be used to get the score for both players, and this will be used by <code>SetText</code> to display this. 
                                        <code>SetFlip</code> will be used to flip the player images where needed and <code>Set</code> will be used to perform a move in the 
                                        game and update the valid locations.
                                    </p>
                                    <h2 class="display-6">Step 15</h2>
                                    <p>
                                        While still in the <code>namespace</code> of <code>Reversi</code> in <i>Library.cs</i> and the <code>class</code> of <code>Library</code> after 
                                        the <strong>Comment</strong> of <code>// Play & Add</code> type the following <strong>Methods</strong>:
                                    </p>
                                    <pre class="code-block language-csharp"><code>
private void Play(Position position)
{
    if (!_state.Over)
    {
        if (_state.Move(position, out Move move))
            Set(position, move);
    }
    else
    {
        _dialog.Show(
                $"Game Over! Winner: {GetPlayer(_state.Winner)} - {GetScore()}");
    }
}

private void Add(int row, int column)
{
    Grid square = new()
    {
        Width = square_size, 
        Height = square_size,
        BorderThickness = new Thickness(1),
        BorderBrush = new SolidColorBrush(Colors.Black),
        Background = new SolidColorBrush(Colors.ForestGreen)
    };
    Image image = new()
    {
        Width = disc_size, 
        Height = disc_size,
        Source = PlayerSource(row, column)
    };
    square.Children.Add(image);
    square.SetValue(Grid.RowProperty, row);
    square.SetValue(Grid.ColumnProperty, column);
    square.Tapped += (object sender, TappedRoutedEventArgs e) =>
        Play(new Position((int)((Grid)sender).GetValue(Grid.RowProperty),
            (int)((Grid)sender).GetValue(Grid.ColumnProperty)));
    _grid.Children.Add(square);
}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                    </code></pre>  
                                    <p>
                                        <code>Play</code> used to perform a move in the game or indicate the game is over with a message and <code>Add</code> will be used to add the squares 
                                        that make up the layout of the board and will respond to the <strong>Event</strong> of <code>Tapped</code> and will call <code>Play</code> along with 
                                        adding an <code>Image</code> that will represent the player for the square.
                                    </p>
                                    <h2 class="display-6">Step 16</h2>
                                    <p>
                                        While still in the <code>namespace</code> of <code>Reversi</code> in <i>Library.cs</i> and the <code>class</code> of <code>Library</code> after 
                                        the <strong>Comment</strong> of <code>// Layout & New</code> type the following <strong>Methods</strong>:
                                    </p>
                                    <pre class="code-block language-csharp"><code>
private void Layout(Grid grid)
{
    grid.Children.Clear();
    StackPanel panel = new() 
    { 
        Orientation = Orientation.Vertical 
    };
    _text = new TextBlock()
    {
        FontSize = font,
        Margin = new Thickness(2),
        FontWeight = FontWeights.Bold,
        VerticalAlignment = VerticalAlignment.Center
    };
    SetText();
    panel.Children.Add(_text);
    _grid = new Grid();
    for (int row = 0; row &lt; size; row++)
    {
        _grid.RowDefinitions.Add(new RowDefinition());
        for (int column = 0; column &lt; size; column++)
        {
            if (row == 0)
                _grid.ColumnDefinitions.Add(new ColumnDefinition());
            Add(row, column);
        }
    }
    panel.Children.Add(_grid);
    grid.Children.Add(panel);
}

public async void New(Grid grid)
{
    _grid = grid;
    _state = new State();
    await SetSourceAsync();
    _dialog = new Dialog(grid.XamlRoot, title);
    Layout(grid);
}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                    </code></pre>  
                                    <p>
                                        <code>Layout</code> will create the look-and-feel of the game by setting up all the elements and <code>New</code> will setup and start a new game.
                                    </p>
                                    <h2 class="display-6">Step 17</h2>
                                    <div class="container">
                                        <div class="row mb-3">
                                            <div class="col-sm">
                                                Within <strong>Solution Explorer</strong> for the <strong>Solution</strong> double-click on <strong>MainWindow.xaml</strong> to see the <strong>XAML</strong> for the <strong>Main Window</strong>.
                                            </div>
                                            <div class="col-sm">
                                                <img src="../assets/was-solution-explorer-xaml-reversi.png" class="img-fluid" alt="Solution Explorer MainWindow.xaml"/>
                                            </div>
                                        </div>
                                    </div>
                                    <h2 class="display-6">Step 18</h2>
                                    <p>
                                        In the <strong>XAML</strong> for <strong>MainWindow.xaml</strong> there will be some <strong>XAML</strong> for a <code>StackPanel</code>, this should be <strong>Removed</strong>:
                                    </p>
                                    <pre class="code-block language-xml"><code>
&lt;StackPanel&nbsp;Orientation=&quot;Horizontal&quot;&nbsp;
HorizontalAlignment=&quot;Center&quot;&nbsp;VerticalAlignment=&quot;Center&quot;&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;Button&nbsp;x:Name=&quot;myButton&quot;&nbsp;Click=&quot;myButton_Click&quot;&gt;Click&nbsp;Me&lt;/Button&gt;
&lt;/StackPanel&gt;                               
                                    </code></pre>  
                                    <h2 class="display-6">Step 19</h2>
                                    <p>
                                        While still in the <strong>XAML</strong> for <strong>MainWindow.xaml</strong> above <code>&lt;/Window&gt;</code>, type in the following <strong>XAML</strong>:
                                    </p>
                                    <pre class="code-block language-xml"><code>
&lt;Grid&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;Viewbox&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;Grid&nbsp;Margin=&quot;50&quot;&nbsp;Name=&quot;Display&quot;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HorizontalAlignment=&quot;Center&quot;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VerticalAlignment=&quot;Center&quot;&nbsp;Loaded=&quot;New&quot;/&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/Viewbox&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;CommandBar&nbsp;VerticalAlignment=&quot;Bottom&quot;&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;AppBarButton&nbsp;Icon=&quot;Page2&quot;&nbsp;Label=&quot;New&quot;&nbsp;Click=&quot;New&quot;/&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/CommandBar&gt;
&lt;/Grid&gt;                                                                                                                                                                                                                                                                                 
                                    </code></pre> 
                                    <p>
                                        This <strong>XAML</strong> contains a <code>Grid</code> with a <strong>Viewbox</strong> which will <strong>Scale</strong> a <code>Grid</code>. 
                                        It has a <code>Loaded</code> event handler for <code>New</code> which is also shared by the <code>AppBarButton</code>.
                                    </p>
                                    <h2 class="display-6">Step 20</h2>
                                    <div class="container">
                                        <div class="row mb-3">
                                            <div class="col-sm">
                                                Within <strong>Solution Explorer</strong> for the <strong>Solution</strong> select the arrow next to <strong>MainWindow.xaml</strong> then double-click on <strong>MainWindow.xaml.cs</strong> to see the <strong>Code</strong> for the <strong>Main Window</strong>.
                                            </div>
                                            <div class="col-sm">
                                                <img src="../assets/was-solution-explorer-code-reversi.png" class="img-fluid" alt="Solution Explorer MainWindow.xaml.cs"/>
                                            </div>
                                        </div>
                                    </div>
                                    <h2 class="display-6">Step 21</h2>
                                    <p>
                                        In the <strong>Code</strong> for <code>MainWindow.xaml.cs</code> there be a Method of <code>myButton_Click(...)</code> this should be <strong>Removed</strong> by removing the following:
                                    </p>
                                    <pre class="code-block language-csharp"><code>
private void myButton_Click(object sender, RoutedEventArgs e)
{
    myButton.Content = "Clicked";
}                                        
                                    </code></pre>  
                                    <h2 class="display-6">Step 22</h2>
                                    <p>
                                        Once <code>myButton_Click(...)</code> has been removed, within the <strong>Constructor</strong> of <code>public MainWindow() { ... }</code> and below the line of <code>this.InitializeComponent();</code> type in the following <strong>Code</strong>:
                                    </p>
                                    <pre class="code-block language-csharp"><code>
private readonly Library _library = new();

private void New(object sender, RoutedEventArgs e) =>
    _library.New(Display);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
                                    </code></pre>
                                    <p>
                                        Here an <strong>Instance</strong> of <code>Library</code> is created then below this is the <strong>Method</strong> of <code>New</code> that will be used with <strong>Event Handler</strong> 
                                        from the <code>XAML</code>, this <strong>Method</strong> uses <strong>Arrow Syntax</strong> with the <code>=></code> for an expression body which is useful when a <strong>Method</strong> only has one line.
                                    </p>
                                    <h2 class="display-6">Step 23</h2>
                                    <div class="container">
                                        <div class="row mb-3">
                                            <div class="col-sm">
                                                That completes the <strong>Windows App SDK</strong> application. In <strong>Visual Studio 2022</strong> from the <strong>Toolbar</strong> select <strong>Reversi (Package)</strong> to <strong>Start</strong> the application.
                                            </div>
                                            <div class="col-sm">
                                                <img src="../assets/was-debug-reversi.png" class="img-fluid" alt="Reversi (Package)"/>
                                            </div>
                                        </div>
                                    </div>    
                                    <h2 class="display-6">Step 24</h2>
                                    <p>
                                        Once running you can then tap on the appropriate indicated <strong>Square</strong> to place either a <strong>White</strong> or <strong>Black</strong> counter on the board to play the game until the game is over or the player with the highest score wins or select <i>New</i> to start a new game.
                                    </p>
                                    <p>
                                        <img src="../assets/was-running-reversi.png" class="img-fluid" alt="Reversi Running and Output" />
                                    </p>
                                    <h2 class="display-6">Step 25</h2>
                                    <div class="container">
                                        <div class="row mb-3">
                                            <div class="col-sm">
                                                To <strong>Exit</strong> the <strong>Windows App SDK</strong> application, select the <strong>Close</strong> button from the top right of the application as that concludes this <strong>Tutorial</strong> for <strong>Windows App SDK</strong> from <a href="https://www.tutorialr.com">tutorialr.com</a>!
                                            </div>
                                            <div class="col-sm">
                                                <img src="../assets/was-close.png" class="img-fluid" alt="Close application"/>
                                            </div>
                                        </div>
                                    </div> 
                                </div>
                                <div class="card-footer">
                                    <div class="justify-content-sm-center text-center m-1">
                                        <a href="../../pdf/win-app-sdk-reversi.pdf" target="_blank">
                                            <span class="btn btn-tutorialr btn-block btn-sm px-3 py-2 position-relative">
                                                Reversi
                                                <span class="position-absolute top-0 start-100 translate-middle badge bg-tutorialr-light rounded-pill">PDF</span>
                                            </span>
                                        </a>
                                    </div>
                                </div>                   
                            </div>
                        </div>
                    </div>
                    <!-- /Tutorial -->
                </section>
                <!-- /Section -->    
            </div>
            <div class="waves waves-bottom bg-white"></div>  
        </main>
        <!-- /Main -->
        <!-- Footer -->
        <footer class="footer mt-auto">
            <nav class="navbar bottom navbar-light p-2">
                <a href="../../../"><img src="../../../images/footer.png" alt="tutorialr.com" height="40px"></a>
                <a href="https://www.twitter.com/tutorialrdotcom" target="_blank"><img src="../../../images/twitter.png" height="45px" alt="@tutorialrdotcom"></a>
                <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank"><img src="../../../images/cc-by-sa.png" height="35px" alt="Attribution-ShareAlike 4.0 International (CC BY-SA 4.0)"></a>
            </nav>
        </footer>
        <!-- /Footer -->
        <!-- Scripts -->
        <script src="../../../bootstrap/js/bootstrap.bundle.min.js"></script>
        <script src="../../../highlight/js/highlight.min.js"></script>
        <!-- /Scripts-->
    </body>
</html>